<!--
  Generated template for the My page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

    <ion-navbar>
        <!-- <ion-buttons left>
            <button ion-button clear icon-only (click)="goSettingPage()">
                <ion-icon name="ios-settings-outline"></ion-icon>
            </button>
        </ion-buttons> -->
        <ion-title navPush="NewMyPage">个人中心</ion-title>
        <ion-buttons right>
            <button ion-button clear icon-only icon-left right (click)="goMessagePage()">
                <ion-icon name="mess"></ion-icon>
            </button>
        </ion-buttons>
    </ion-navbar>

</ion-header>


<ion-content>
    <ion-refresher (ionRefresh)="doRefresh($event)" pullMax="60">
        <ion-refresher-content refreshingSpinner="1" pullingIcon="0"></ion-refresher-content>
    </ion-refresher>
    <ion-list>
        <ion-item tappable (click)="goAccountManagementPage($event)" padding-left no-lines detail-none style="border-bottom: 1px solid #e0e0e0;">
            <ion-avatar item-left>
                <!--<img img-lazy-load="{{userInfo?.data?.avatar}}" imageViewer alt="">-->
                <ion-img src="{{userInfo?.data?.avatar}}"></ion-img>
            </ion-avatar>
            <h2>{{userInfo?.data?.username}}</h2>
            <p class="vip" tappable navPush="MemberCenterPage" (click)="$event.stopPropagation()">
                <ion-img src="{{userInfo?.data?.user_info?.rank_icon}}"></ion-img>
                <ion-note>{{userInfo?.data?.user_info?.rank_name||'暂无等级'}}</ion-note>
            </p>
            <div tappable (click)="goAccountManagementPage($event)" color="gray" ion-button round outline icon-left item-right>
                <ion-icon><img style="width:1.3rem;" src="./assets/icon/images/user_cener_1_11.png" alt=""></ion-icon>
                账号管理
            </div>
        </ion-item>
        <!-- <ion-item tappable padding-left [navPush]="AllOrdersPage" [navParams]="{index:0}" no-lines mode="ios" detail-push style="border-bottom: 1px solid #e0e0e0;">
            <img src="./assets/icon/images/user_center_5.png" alt="" item-left class="myitem-icon"> 全部订单
        </ion-item> -->
        <ion-item class="indent-info">
            <div class="indent-info-content">
                <div tappable navPush="AllOrdersPage" [navParams]="{index:1}">
                    <div class="number">{{usercount?.data?.unpay||0}}</div>
                    <div class="text">待付款</div>
                </div>
                <div tappable navPush="AllOrdersPage" [navParams]="{index:2}">
                    <div class="number">{{usercount?.data?.collect||0}}</div>
                    <div class="text">待收货</div>
                </div>
                <div tappable navPush="AllOrdersPage" [navParams]="{index:3}">
                    <div class="number">{{usercount?.data?.ok||0}}</div>
                    <div class="text">已完成</div>
                </div>
                <!-- <div tappable [navPush]="AllOrdersPage" [navParams]="{index:4}">
                    <div class="number">{{usercount?.data?.cancel||0}}</div>
                    <div class="text">已取消</div>
                </div> -->
                <div tappable (click)="goRepairReturnPage()">
                    <div class="number">{{usercount?.data?.return||0}}</div>
                    <div class="text">返修退换</div>
                </div>
                <div tappable navPush="AllOrdersPage" [navParams]="{index:0}">
                    <div class="number">
                        <img src="./assets/icon/images/user_center_5.png" class="allorder-icon">
                    </div>
                    <div class="text">我的订单</div>
                </div>
            </div>
        </ion-item>
    </ion-list>
    <ion-list>
        <ion-item padding-left no-lines mode="ios" style="border-bottom: 1px solid #e0e0e0;">
            <img src="./assets/icon/images/user_center_9.png" alt="" item-left class="myitem-icon"> 我的资产
        </ion-item>
        <ion-item padding-left>
            <div class="myAssets-info">
                <div tappable navPush="CouponPage">
                    <div class="number">{{usercount?.data?.bonus_count||0}}</div>
                    <div class="text">优惠券</div>
                </div>
                <div tappable navPush="AccountJifenPage" [navParams]="{number:userInfo?.data?.integral}">
                    <div class="number">{{userInfo?.data?.integral||0}}</div>
                    <div class="text">积分</div>
                </div>
                <div tappable navPush="AccountBalancePage">
                    <div class="number">{{userInfo?.data?.user_money||0}}</div>
                    <div class="text">余额</div>
                </div>
                <div (click)="openXimu()">
                    <div class="number">暂未开放</div>
                    <div class="text" (click)="openXimu()">镜库白条</div>
                </div>
            </div>
        </ion-item>
    </ion-list>
    <ion-list *ngIf="userInfo&&userInfo?.data?.ywy?.name!='您是业务员！'">
        <ion-item tappable (click)="goMySalesmanPage()" padding-left mode="ios" detail-push>
            <img src="./assets/icon/images/user_center_11.png" alt="" item-left class="myitem-icon"> 我的业务员
        </ion-item>
    </ion-list>
    <ion-list>
        <ion-item tappable (click)="goAccountProcessPage()" padding-left mode="ios" detail-push>
            <img src="./assets/icon/images/user_center_1.png" alt="" item-left class="myitem-icon"> 来镜加工
        </ion-item>
        <ion-item tappable navPush="ReceiptPage" padding-left mode="ios" detail-push>
            <img src="./assets/icon/images/user_center_4.png" alt="" item-left class="myitem-icon"> 发票管理
        </ion-item>
    </ion-list>
    <ion-list>
        <ion-item tappable navPush="DredgeMoreCityPage" padding-left mode="ios" detail-push>
            <img src="./assets/icon/images/user_center_2.png" alt="" item-left class="myitem-icon"> 地区申请
        </ion-item>
    </ion-list>
    <ion-list>
        <ion-item tappable navPush="AccountCollectGoodsPage" padding-left mode="ios" detail-push>
            <img src="./assets/icon/images/user_center_8.png" alt="" item-left class="myitem-icon"> 收藏的商品
        </ion-item>
        <ion-item tappable navPush="AccountCollectStorePage" padding-left mode="ios" detail-push>
            <img src="./assets/icon/images/user_center_3.png" alt="" item-left class="myitem-icon"> 收藏的店铺
        </ion-item>
        <ion-item tappable navPush="AccountHistoryPage" padding-left mode="ios" detail-push>
            <img src="./assets/icon/images/user_center_7.png" alt="" item-left class="myitem-icon"> 浏览记录
            <!--<ion-icon color="gray" name="ios-arrow-forward" item-right></ion-icon>-->
        </ion-item>
    </ion-list>
    <ion-list>
        <a ion-item tappable href="tel:400-080-5118" padding-left mode="ios" detail-push>
            <img src="./assets/icon/images/user_center_6.png" alt="" item-left class="myitem-icon"> 镜库客服
        </a>
        <ion-item tappable navPush="AccountHelperPage" padding-left mode="ios" detail-push>
            <img src="./assets/icon/images/user_cener_1_38.png" alt="" item-left class="myitem-icon"> 帮助中心
        </ion-item>
    </ion-list>
    <button large ion-button block pull color="light" (click)="signOut()" margin-vertical>退出登录</button>
</ion-content>