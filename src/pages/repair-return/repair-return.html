<!--
  Generated template for the RepairReturnPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
    <ion-navbar>
        <ion-title>
            <ion-segment mode="ios" [(ngModel)]="applyTabs" color="primary">
                <ion-segment-button value="apply">
                    售后申请
                </ion-segment-button>
                <ion-segment-button value="applyLog">
                    申请记录
                </ion-segment-button>
            </ion-segment>
        </ion-title>
        <ion-buttons right>
            <button ion-button clear icon-only>
                <ion-icon name="ios-funnel-outline"></ion-icon>
            </button>
        </ion-buttons>
    </ion-navbar>
    <ion-toolbar class="mysearchbar">
        <ion-searchbar mode="ios" #mySearchBar debounce="500" placeholder="请输入订单号或者商品编号" animated="true"></ion-searchbar>
    </ion-toolbar>
</ion-header>

<ion-content [ngSwitch]="applyTabs" #myContent>
    <ion-refresher (ionRefresh)="doRefresh($event)" pullMax="60">
        <ion-refresher-content refreshingSpinner="1" pullingIcon="0"></ion-refresher-content>
    </ion-refresher>
    <!--<ion-slides #bannerSlide>
        <ion-slide>
        </ion-slide>
        <ion-slide>
        </ion-slide>
    </ion-slides>-->
    <!--<img img-lazy-load="./assets/images/images/bg_login.jpg" alt="">-->
    <div class="apply" *ngSwitchCase="'apply'">
        <div class="order" *ngFor="let item of orderRepair">
            <div class="order-head">
                <span>订单编号：{{item.order_sn}}</span>
                <span>下单时间：{{item.add_time}}</span>
            </div>
            <div class="order-body">
                <div class="order-body-item" *ngFor="let subitem of item.goods">
                    <ion-checkbox mode="ios" (ionChange)="checkbox(item)" [(ngModel)]="subitem.selected" [checked]="item.selected"></ion-checkbox>
                    <!--<ion-icon class="checkbox" name="ios-help-circle-outline"></ion-icon>-->
                    <div class="img">
                        <img img-lazy-load="{{subitem.original_img}}">
                        <!--<div class="guoqi">超过售后期</div>-->
                    </div>
                    <div class="order-body-item-content">
                        <h2 style="-webkit-box-orient: vertical;">{{subitem.goods_name}}</h2>
                        <p>数量：{{subitem.goods_number}}</p>
                    </div>
                </div>
            </div>
            <div class="order-foot">
                <label><ion-checkbox mode="ios" [(ngModel)]="item.selected"></ion-checkbox>全选</label>
                <button ion-button (click)="goApplyServicePage(item.order_id,item.goods)">申请售后</button>
            </div>
        </div>
    </div>
    <div class="applyLog" *ngSwitchCase="'applyLog'">
        <div class="order" *ngFor="let item of repairList">
            <div class="order-head">
                <span>订单编号：{{item.order_sn}}</span>
                <span>{{item.type}}</span>
            </div>
            <div class="order-body">
                <div class="order-body-item" *ngFor="let subitem of item.goods">
                    <div class="img">
                        <img img-lazy-load="{{subitem.original_img}}">
                    </div>
                    <div class="order-body-item-content">
                        <h2 style="-webkit-box-orient: vertical;">{{subitem.goods_name}}</h2>
                    </div>
                </div>
            </div>
            <ion-item mode="ios" detail-push no-lines>
                <img src="./assets/icon/images/clock_2.png" item-start alt="" *ngIf="item.return_status==0">
                <img src="./assets/icon/images/ok.png" item-start alt="" *ngIf="item.return_status!=0">
                <span>{{item.status}}</span>
            </ion-item>
            <div class="order-foot" *ngIf="item.return_status==0">
                <button ion-button outline (click)="cancelApply(item.return_id)">取消申请</button>
            </div>
        </div>
    </div>
    <ion-fab right bottom tappable (click)="myContent.scrollToTop(0)">
        <button ion-fab color="dark" mini goBackTop></button>
    </ion-fab>

    <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
        <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="加载更多...">></ion-infinite-scroll-content>
    </ion-infinite-scroll>
</ion-content>